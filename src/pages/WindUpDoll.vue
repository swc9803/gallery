<template>
  <div class="container">
    <div ref="filterRef" class="filter" />
    <div class="screen">
      <div ref="velocityRef" class="velocity" v-for="wind in 15" :key="wind" />
      <div class="overflow">
        <div ref="celestialBodyRef" class="celestialBody">
          <div class="sun" />
          <div ref="moonRef" class="moon" />
        </div>
      </div>
      <div v-for="star in 8" :key="star.id" :ref="starRef" class="star" />
      <div ref="cloudRef" class="cloud" />
      <div ref="mountainRef" class="mountain" />
      <!-- tree -->
      <svg
        v-for="tree in 3"
        :key="tree.id"
        ref="treeRef"
        class="tree"
        viewBox="0 0 110 225"
      >
        <path fill="#A84C18" d="M31 78h48v147H31z" />
        <circle cx="55" cy="55" r="55" fill="#4AA512" />
      </svg>
      <svg class="toy" viewBox="0 0 150 317">
        <g id="Frame 5" clip-path="url(#clip0_12_2)">
          <g ref="leg1Ref">
            <path
              fill="#242424"
              d="M62.7683 219.982h22v85h-22z"
              transform="rotate(-30 62.7683 219.982)"
            />
            <path
              fill="#000"
              d="M103.036 293.728c-.828-1.435-.337-3.27 1.098-4.098l20.496-11.834c3.508-2.025 7.993-.823 10.018 2.684 1.012 1.754.411 3.997-1.342 5.009l-23.672 13.667c-1.435.828-3.269.337-4.098-1.098l-2.5-4.33Z"
            />
          </g>
          <g ref="leg2Ref">
            <path
              fill="#242424"
              d="M65.7682 208.982h22v85h-22z"
              transform="rotate(30 65.7682 208.982)"
            />
            <path
              fill="#000"
              d="M22.0362 280.728c.8284-1.435 2.6632-1.927 4.098-1.098l20.496 11.833c3.5075 2.025 4.7092 6.51 2.6842 10.017-1.0126 1.754-3.2551 2.355-5.0088 1.343l-23.6714-13.667c-1.4348-.829-1.9265-2.663-1.098-4.098l2.5-4.33Z"
            />
          </g>
          <g ref="spinRef">
            <g>
              <mask id="path-5-inside-1_12_2" fill="#fff">
                <path
                  d="M40.7003 178.589c0 6.652-5.3921 12.044-12.0437 12.044-6.6515 0-12.0437-5.392-12.0437-12.044 0-6.651 5.3922-12.043 12.0437-12.043 6.6516 0 12.0437 5.392 12.0437 12.043Zm-19.1254 0c0 3.912 3.1706 7.082 7.0817 7.082s7.0817-3.17 7.0817-7.082c0-3.911-3.1706-7.081-7.0817-7.081s-7.0817 3.17-7.0817 7.081Z"
                />
              </mask>
              <path
                fill="#D5D5D5"
                stroke="#B1B1B1"
                stroke-width="2"
                d="M40.7003 178.589c0 6.652-5.3921 12.044-12.0437 12.044-6.6515 0-12.0437-5.392-12.0437-12.044 0-6.651 5.3922-12.043 12.0437-12.043 6.6516 0 12.0437 5.392 12.0437 12.043Zm-19.1254 0c0 3.912 3.1706 7.082 7.0817 7.082s7.0817-3.17 7.0817-7.082c0-3.911-3.1706-7.081-7.0817-7.081s-7.0817 3.17-7.0817 7.081Z"
                mask="url(#path-5-inside-1_12_2)"
              />
            </g>
            <g>
              <mask id="path-6-inside-2_12_2" fill="#fff">
                <path
                  d="M40.7003 209.1c0 6.652-5.3921 12.044-12.0437 12.044-6.6515 0-12.0437-5.392-12.0437-12.044 0-6.651 5.3922-12.044 12.0437-12.044 6.6516 0 12.0437 5.393 12.0437 12.044Zm-19.1254 0c0 3.911 3.1706 7.082 7.0817 7.082s7.0817-3.171 7.0817-7.082-3.1706-7.082-7.0817-7.082-7.0817 3.171-7.0817 7.082Z"
                />
              </mask>
              <path
                fill="#D5D5D5"
                stroke="#B1B1B1"
                stroke-width="2"
                d="M40.7003 209.1c0 6.652-5.3921 12.044-12.0437 12.044-6.6515 0-12.0437-5.392-12.0437-12.044 0-6.651 5.3922-12.044 12.0437-12.044 6.6516 0 12.0437 5.393 12.0437 12.044Zm-19.1254 0c0 3.911 3.1706 7.082 7.0817 7.082s7.0817-3.171 7.0817-7.082-3.1706-7.082-7.0817-7.082-7.0817 3.171-7.0817 7.082Z"
                mask="url(#path-6-inside-2_12_2)"
              />
            </g>
            <path
              fill="#D5D5D5"
              stroke="#B1B1B1"
              d="M14.6562 194.222c-.0572-1.747.595-3.661 2.2334-6.301h37.7631v11.847h-37.771c-1.4057-2.142-2.1686-3.805-2.2255-5.546Z"
            />
          </g>
          <circle
            cx="114.943"
            cy="207.266"
            r="7.5"
            fill="#FFE8AE"
            transform="rotate(-45 114.943 207.266)"
          />
          <path
            fill="#EA4545"
            d="M71.4561 174.385c-2.9289-2.929-2.9289-7.678 0-10.607 2.9289-2.929 7.6777-2.929 10.6066 0l32.8803 32.881-10.606 10.606-32.8809-32.88Z"
          />
          <rect
            width="15"
            height="6"
            x="102.922"
            y="205.851"
            fill="#FAFAFA"
            rx="1"
            transform="rotate(-45 102.922 205.851)"
          />
          <path
            fill="#1E1E1E"
            d="M1.89035 5.40104c.64839-1.17067 1.2824-1.51235 2.89764-1.536L29.8449 51.1345l31.848 60.0805 31.1455 58.756-3.4772 1.843L1.89035 5.40104Z"
          />
          <path
            fill="#623B00"
            d="M110.905 212.457c-10.054-15.466-14.6685-24.39-21.5438-40.643l3.4772-1.843-49.8796-94.0973c1.0118-.976 1.6531-1.2908 2.8976-1.536L95.736 168.435l25.021 38.799c-2.53 4.53-4.698 5.644-9.852 5.223Z"
          />
          <path
            fill="#C33"
            d="M50.629 168.95c-.2754-4.846 2.9613-9.251 7.7403-10.094 10.0569-1.775 17.8911-1.733 28.0146.09 4.5741.825 7.7688 4.914 7.7688 9.562v58.064h-42.5l1-16.026v-6L50.629 168.95Z"
          />
          <circle cx="90.6527" cy="179.046" r="2.5" fill="#EDC124" />
          <circle cx="90.6527" cy="188.046" r="2.5" fill="#EDC124" />
          <circle cx="90.6527" cy="197.046" r="2.5" fill="#EDC124" />
          <path
            fill="#FAFAFA"
            d="M52.6528 204.546h41.5v6H52.6527l.0001-3v-3Z"
          />
          <path
            fill="#FAFAFA"
            d="m55.1527 160.046 39 41.5v3H89.247l-38.0943-39.5c.8709-2.333 1.7508-3.41 4-5Z"
          />
          <g ref="armRef">
            <circle
              cx="41.398"
              cy="211.556"
              r="7.5"
              fill="#FFE8AE"
              transform="rotate(30 41.398 211.556)"
            />
            <path
              fill="#EA4545"
              d="M61.9028 161.041c2.0711-3.587 6.658-4.816 10.2452-2.745 3.5872 2.071 4.8163 6.658 2.7452 10.245l-23.25 40.27-12.9904-7.5 23.25-40.27Z"
            />
            <rect
              width="15"
              height="6"
              x="39.6528"
              y="199.579"
              fill="#FAFAFA"
              rx="1"
              transform="rotate(30 39.6528 199.579)"
            />
          </g>
          <circle cx="72.1528" cy="140.572" r="21" fill="#FFE8AE" />
          <circle cx="87.1528" cy="136.572" r="2" fill="#000" />
          <path
            fill="#000"
            d="M93.0828 142.761c.6202 1.378-.5101 3.23-2.5246 4.137-2.0144.906-4.1503.525-4.7705-.853-.6202-1.378 1.8997-.679 3.9142-1.585 2.0145-.907 2.7606-3.077 3.3809-1.699Z"
          />
          <ellipse cx="87.1527" cy="128.072" fill="#383838" rx="19" ry="3.5" />
          <path
            fill="#FAFAFA"
            d="m58.059 128.576 6.8619-1.384 7.2318 34.376c-3.0085-.069-4.5-.022-8-1.572l-6.0937-31.42Z"
          />
          <path
            fill="#C33"
            d="M49.1527 76.5721c16.1166-1.3805 25.3201-1.3567 42 0l-4 49.4999v3.5h-34v-3.5l-4-49.4999Z"
          />
        </g>
        <defs>
          <clipPath id="clip0_12_2">
            <path fill="#fff" d="M0 0h150v317H0z" />
          </clipPath>
        </defs>
      </svg>
    </div>
    <div class="footer">
      <!-- 속도계 -->
      <div class="speedWrapper">
        <svg class="speed" viewBox="0 0 150 150">
          <g clip-path="url(#clip0_10_4)">
            <rect width="150" height="150" fill="#fff" rx="75" />
            <circle cx="75" cy="75" r="75" fill="#4A4A4A" />
            <path
              fill="#696969"
              d="M105.5 76c0 17.1208-13.8792 31-31 31s-31-13.8792-31-31 13.8792-31 31-31 31 13.8792 31 31Zm-61.4191 0c0 16.8 13.6191 30.419 30.4191 30.419S104.919 92.8 104.919 76 91.3 45.5809 74.5 45.5809 44.0809 59.2 44.0809 76Z"
            />
            <path
              ref="handRef"
              class="hand"
              fill="#FA4F4F"
              d="m30 101.232 9.6047-7.2772 13.211-8.2048 12.1546-6.4401 11.9111-6.8769 1.5 2.5981-11.9111 6.8769-11.6546 7.3061-13.711 7.3387L30 101.232Z"
            />
            <circle cx="74.5" cy="74.5" r="6.5" fill="#3A3A3A" />
            <path
              fill="#fff"
              d="M17.9988 108.144c-.5497-.002-1.0227-.138-1.419-.406-.3942-.269-.6978-.657-.9109-1.167-.2109-.509-.3153-1.121-.3132-1.837 0-.714.1055-1.322.3164-1.825.2131-.503.5167-.886.9109-1.148.3963-.264.8682-.396 1.4158-.396s1.0185.132 1.4126.396c.3963.265.701.648.9141 1.151.2131.501.3185 1.108.3164 1.822 0 .718-.1065 1.331-.3196 1.841-.2109.509-.5135.898-.9077 1.166-.3941.269-.8661.403-1.4158.403Zm0-1.148c.375 0 .6744-.188.8981-.565.2237-.377.3345-.943.3324-1.697 0-.497-.0512-.91-.1534-1.24-.1002-.331-.2429-.579-.4283-.745-.1832-.166-.3995-.249-.6488-.249-.3729 0-.6712.186-.8949.559-.2237.373-.3366.931-.3388 1.675 0 .503.0501.922.1502 1.259.1023.334.2461.586.4315.754.1854.166.4027.249.652.249ZM11.0208 78.0895c-.4517 0-.8544-.0831-1.20812-.2493-.35157-.1662-.63069-.3952-.83736-.6871-.20668-.292-.31428-.6265-.3228-1.0036h1.34233c.01495.2535.12145.4592.31965.6168.1981.1577.4335.2365.7063.2365.2173 0 .4091-.0479.5753-.1438.1683-.098.2993-.2333.3931-.4059.0958-.1747.1438-.375.1438-.6008 0-.2301-.049-.4326-.147-.6073-.0959-.1747-.2291-.3111-.3995-.4091-.1705-.098-.3654-.148-.5849-.1502-.1918 0-.3782.0394-.5593.1183-.179.0788-.3185.1864-.4187.3228l-1.23046-.2206.31002-3.4517h4.00144v1.1314h-2.8605l-.1694 1.6396h.0384c.1151-.1619.2887-.2962.521-.4027.2322-.1065.4921-.1598.7798-.1598.3942 0 .7457.0927 1.0547.278.3089.1854.5529.44.7319.7639.1789.3217.2674.6925.2652 1.1122.0022.4411-.1001.8331-.3068 1.1761-.2045.341-.4911.6094-.8597.8055-.3665.1938-.7926.2908-1.2784.2908ZM20.0784 34.4545V41h-1.3839v-5.2319h-.0383l-1.499.9396v-1.2272l1.6204-1.026h1.3008ZM24.2005 41.1438c-.5498-.0021-1.0228-.1374-1.4191-.4059-.3942-.2684-.6978-.6573-.9108-1.1665-.211-.5093-.3154-1.1218-.3133-1.8377 0-.7138.1055-1.3221.3165-1.825.213-.5028.5166-.8853.9108-1.1473.3963-.2642.8683-.3963 1.4159-.3963.5475 0 1.0184.1321 1.4126.3963.3963.2642.701.6477.9141 1.1505.213.5007.3185 1.108.3164 1.8218 0 .718-.1066 1.3316-.3196 1.8409-.211.5092-.5135.8981-.9077 1.1665-.3942.2685-.8661.4027-1.4158.4027Zm0-1.1474c.375 0 .6743-.1885.898-.5656.2238-.3772.3346-.9429.3324-1.6971 0-.4965-.0511-.9098-.1534-1.2401-.1001-.3302-.2429-.5785-.4282-.7447-.1833-.1662-.3996-.2493-.6488-.2493-.3729 0-.6712.1865-.8949.5593-.2237.3729-.3367.9312-.3388 1.6748 0 .5028.0501.9225.1502 1.2592.1023.3345.2461.5859.4315.7543.1853.1662.4027.2492.652.2492ZM73.2761 8.45454V15h-1.3838V9.76811h-.0384l-1.4989.93959V9.48047l1.6204-1.02593h1.3007ZM77.2224 15.0895c-.4517 0-.8544-.0831-1.2081-.2493-.3515-.1662-.6306-.3952-.8373-.6871-.2067-.292-.3143-.6265-.3228-1.0036h1.3423c.0149.2536.1215.4592.3196.6168.1982.1577.4336.2365.7063.2365.2174 0 .4091-.0479.5753-.1438.1683-.098.2994-.2333.3931-.4059.0959-.1747.1438-.375.1438-.6008 0-.2301-.049-.4326-.147-.6073-.0959-.1747-.229-.3111-.3995-.4091-.1704-.098-.3654-.148-.5848-.1502-.1918 0-.3782.0394-.5593.1183-.179.0788-.3186.1864-.4187.3228l-1.2305-.2206.31-3.45166h4.0014v1.1314h-2.8604l-.1694 1.63956h.0384c.115-.1619.2887-.2962.5209-.4027.2323-.1065.4922-.1598.7798-.1598.3942 0 .7458.0927 1.0547.278.309.1854.5529.44.7319.7639.179.3217.2674.6925.2653 1.1122.0021.4411-.1002.8331-.3068 1.1762-.2046.3409-.4912.6093-.8598.8053-.3664.1939-.7926.2909-1.2784.2909ZM121.598 41v-.9972l2.33-2.1573c.198-.1917.364-.3643.498-.5177.137-.1534.24-.3037.31-.4507.071-.1491.106-.31.106-.4826 0-.1917-.044-.3569-.131-.4954-.088-.1406-.207-.2482-.358-.3228-.151-.0767-.323-.115-.515-.115-.2 0-.375.0405-.524.1214-.149.081-.264.1971-.345.3484-.081.1513-.121.3313-.121.5401h-1.314c0-.4282.097-.8.291-1.1154.194-.3153.465-.5593.815-.7319.349-.1726.752-.2588 1.208-.2588.469 0 .877.0831 1.224.2492.349.1641.621.3921.815.684.194.2919.291.6264.291 1.0035 0 .2472-.049.4912-.147.7319-.096.2408-.268.5082-.515.8022-.247.2919-.595.6424-1.045 1.0515l-.955.9365v.0447h2.748V41h-4.666ZM129.833 41.1438c-.549-.0021-1.022-.1374-1.419-.4059-.394-.2684-.698-.6573-.911-1.1665-.211-.5093-.315-1.1218-.313-1.8377 0-.7138.106-1.3221.317-1.825.213-.5028.516-.8853.91-1.1473.397-.2642.869-.3963 1.416-.3963.548 0 1.019.1321 1.413.3963.396.2642.701.6477.914 1.1505.213.5007.319 1.108.316 1.8218 0 .718-.106 1.3316-.319 1.8409-.211.5092-.514.8981-.908 1.1665-.394.2685-.866.4027-1.416.4027Zm0-1.1474c.375 0 .675-.1885.898-.5656.224-.3772.335-.9429.333-1.6971 0-.4965-.051-.9098-.154-1.2401-.1-.3302-.243-.5785-.428-.7447-.183-.1662-.399-.2493-.649-.2493-.373 0-.671.1865-.895.5593-.223.3729-.336.9312-.338 1.6748 0 .5028.05.9225.15 1.2592.102.3345.246.5859.431.7543.186.1662.403.2492.652.2492ZM130.796 78v-.9972l2.33-2.1573c.198-.1917.364-.3643.498-.5177.137-.1534.24-.3037.31-.4507.07-.1491.106-.31.106-.4826 0-.1917-.044-.3569-.131-.4954-.088-.1406-.207-.2482-.358-.3228-.152-.0767-.323-.115-.515-.115-.2 0-.375.0405-.524.1214-.149.081-.264.1971-.345.3484-.081.1513-.122.3313-.122.5401h-1.313c0-.4282.097-.8.291-1.1154.193-.3153.465-.5593.815-.7319.349-.1726.752-.2588 1.208-.2588.468 0 .876.0831 1.224.2492.349.1641.621.3921.815.684.194.2919.291.6264.291 1.0035 0 .2472-.049.4912-.147.7319-.096.2408-.268.5082-.515.8022-.247.2919-.596.6424-1.045 1.0515l-.956.9365v.0447h2.749V78h-4.666ZM138.855 78.0895c-.451 0-.854-.0831-1.208-.2493-.351-.1662-.631-.3952-.837-.6871-.207-.292-.314-.6265-.323-1.0036h1.342c.015.2535.122.4592.32.6168.198.1577.434.2365.706.2365.218 0 .409-.0479.576-.1438.168-.098.299-.2333.393-.4059.096-.1747.143-.375.143-.6008 0-.2301-.049-.4326-.147-.6073-.095-.1747-.229-.3111-.399-.4091-.171-.098-.365-.148-.585-.1502-.192 0-.378.0394-.559.1183-.179.0788-.319.1864-.419.3228l-1.23-.2206.31-3.4517h4.001v1.1314h-2.86l-.17 1.6396h.039c.115-.1619.288-.2962.521-.4027.232-.1065.492-.1598.779-.1598.395 0 .746.0927 1.055.278.309.1854.553.44.732.7639.179.3217.267.6925.265 1.1122.002.4411-.1.8331-.307 1.1761-.204.341-.491.6094-.859.8055-.367.1938-.793.2908-1.279.2908ZM126.385 108.089c-.477 0-.902-.082-1.275-.246-.37-.166-.663-.394-.879-.684-.213-.291-.322-.628-.329-1.01h1.394c.008.16.06.301.156.422.098.12.228.212.39.278.162.066.344.1.547.1.211 0 .397-.038.559-.112.162-.075.289-.178.38-.31.092-.132.138-.285.138-.457 0-.175-.049-.33-.147-.464-.096-.136-.235-.243-.416-.319-.179-.077-.392-.115-.639-.115h-.61v-1.017h.61c.209 0 .393-.036.553-.108.162-.073.288-.173.377-.301.09-.13.134-.281.134-.454 0-.164-.039-.308-.118-.431-.077-.126-.185-.224-.326-.294-.138-.071-.3-.106-.486-.106-.187 0-.359.034-.514.103-.156.066-.28.16-.374.284-.094.124-.144.268-.15.435h-1.327c.007-.377.114-.71.323-.997.209-.288.49-.513.844-.675.356-.164.757-.246 1.205-.246.451 0 .847.082 1.185.246.339.164.602.386.79.665.189.277.283.588.281.933.002.367-.112.672-.342.917-.228.245-.525.401-.892.467v.051c.482.062.848.229 1.1.502.253.271.379.609.377 1.016.002.373-.106.704-.323.994-.215.29-.512.518-.892.684-.379.166-.813.249-1.304.249ZM132.465 108.144c-.55-.002-1.023-.138-1.419-.406-.394-.269-.698-.657-.911-1.167-.211-.509-.315-1.121-.313-1.837 0-.714.105-1.322.316-1.825.213-.503.517-.886.911-1.148.397-.264.869-.396 1.416-.396.548 0 1.019.132 1.413.396.396.265.701.648.914 1.151.213.501.318 1.108.316 1.822 0 .718-.106 1.331-.319 1.841-.211.509-.514.898-.908 1.166-.394.269-.866.403-1.416.403Zm0-1.148c.375 0 .674-.188.898-.565.224-.377.335-.943.333-1.697 0-.497-.052-.91-.154-1.24-.1-.331-.243-.579-.428-.745-.183-.166-.4-.249-.649-.249-.373 0-.671.186-.895.559-.224.373-.336.931-.339 1.675 0 .503.051.922.151 1.259.102.334.246.586.431.754.185.166.403.249.652.249ZM13.3301 109l1 1.7320508-4.33012702 2.5-1-1.7320508zM5 74v2H0v-2zM21.2085 29.9755l-1.1902067 1.60729836-4.0182459-2.97551675 1.1902067-1.60729836zM129 29.9755l1.190212 1.607294 4.018235-2.97553-1.190212-1.607294zM75.5 5h-2V0h2zM150 74v2h-5v-2zM135 111.732l1-1.7320508 4.33012702 2.5-1 1.7320508z"
            />
          </g>
          <defs>
            <clipPath id="clip0_10_4">
              <rect width="150" height="150" fill="#fff" rx="75" />
            </clipPath>
          </defs>
        </svg>
      </div>
      <!-- 태엽 -->
      <div class="spring">
        <p v-if="!clicked" ref="alertRef">Spin this!</p>
        <div ref="springRef" class="drag" />
        <svg
          class="rotate"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 205 205"
        >
          <path
            fill="#D5D5D5"
            stroke="#B1B1B1"
            d="M92.1393 124.707 88 103h29l-4.139 21.704c-4.082 1.546-7.243 2.292-10.362 2.296-3.1191.004-6.28-.735-10.3597-2.293Z"
          />
          <g class="spin" ref="rotateRef">
            <path
              fill="#D9D9D9"
              stroke="#B1B1B1"
              stroke-width="2"
              d="M91 101.852c0 1.429-.9661 2.99-3.1949 4.577-2.2034 1.569-5.4566 3.022-9.5665 4.26-8.2073 2.471-19.6056 4.015-32.2386 4.015s-24.0313-1.544-32.2386-4.015c-4.10994-1.238-7.36311-2.691-9.56652-4.26C1.96613 104.842 1 103.281 1 101.852c0-1.43.96613-2.9905 3.19488-4.5773 2.20341-1.5687 5.45658-3.0224 9.56652-4.2601C21.9687 90.5432 33.367 89 46 89s24.0313 1.5432 32.2386 4.0146c4.1099 1.2377 7.3631 2.6914 9.5665 4.2601C90.0339 98.8615 91 100.422 91 101.852Zm-76.6667 0c0 .949.7421 1.591 1.3525 1.982.6799.436 1.6059.823 2.6679 1.171 2.1381.701 5.0585 1.321 8.2618 1.836 6.4145 1.031 14.1347 1.67 19.3845 1.67 5.2487 0 13.2143-.638 19.8733-1.669 3.3259-.515 6.3675-1.134 8.5955-1.833 1.1067-.348 2.0692-.732 2.7746-1.164.3527-.215.6857-.47.9396-.775.2584-.31.4729-.722.4729-1.218 0-.497-.2145-.908-.4729-1.219-.2539-.305-.5869-.559-.9396-.7747-.7054-.4317-1.6679-.816-2.7746-1.1634-2.228-.6995-5.2696-1.3183-8.5955-1.8331-6.659-1.0307-14.6246-1.6694-19.8733-1.6694-5.2498 0-12.97.6389-19.3845 1.6703-3.2033.5151-6.1237 1.1347-8.2618 1.8361-1.062.3483-1.988.7348-2.6679 1.1705-.6104.3907-1.3525 1.0327-1.3525 1.9827Z"
            />
            <path
              fill="#D9D9D9"
              stroke="#B1B1B1"
              stroke-width="2"
              d="M91 107.148c0 1.43-.9661 2.991-3.1949 4.577-2.2034 1.569-5.4566 3.023-9.5665 4.26C70.0313 118.457 58.633 120 46 120s-24.0313-1.543-32.2386-4.015c-4.10994-1.237-7.36311-2.691-9.56652-4.26C1.96613 110.139 1 108.578 1 107.148c0-1.429.96613-2.99 3.19488-4.577 2.20341-1.569 5.45658-3.0224 9.56652-4.2601C21.9687 95.8395 33.367 94.2963 46 94.2963s24.0313 1.5432 32.2386 4.0146c4.1099 1.2377 7.3631 2.6911 9.5665 4.2601C90.0339 104.158 91 105.719 91 107.148Zm-76.6667 0c0 .95.7421 1.592 1.3525 1.983.6799.435 1.6059.822 2.6679 1.17 2.1381.702 5.0585 1.321 8.2618 1.836 6.4145 1.032 14.1347 1.671 19.3845 1.671 5.2487 0 13.2143-.639 19.8733-1.67 3.3259-.515 6.3675-1.133 8.5955-1.833 1.1067-.347 2.0692-.732 2.7746-1.163.3527-.216.6857-.47.9396-.775.2584-.311.4729-.722.4729-1.219 0-.496-.2145-.908-.4729-1.218-.2539-.305-.5869-.56-.9396-.775-.7054-.432-1.6679-.816-2.7746-1.164-2.228-.699-5.2696-1.318-8.5955-1.833-6.659-1.031-14.6246-1.669-19.8733-1.669-5.2498 0-12.97.639-19.3845 1.67-3.2033.515-6.1237 1.135-8.2618 1.836-1.062.348-1.988.735-2.6679 1.171-.6104.391-1.3525 1.033-1.3525 1.982ZM204 101.852c0 1.429-.966 2.99-3.195 4.577-2.203 1.569-5.456 3.022-9.566 4.26-8.208 2.471-19.606 4.015-32.239 4.015-12.633 0-24.031-1.544-32.239-4.015-4.11-1.238-7.363-2.691-9.566-4.26-2.229-1.587-3.195-3.148-3.195-4.577 0-1.43.966-2.9905 3.195-4.5773 2.203-1.5687 5.456-3.0224 9.566-4.2601C134.969 90.5432 146.367 89 159 89c12.633 0 24.031 1.5432 32.239 4.0146 4.11 1.2377 7.363 2.6914 9.566 4.2601 2.229 1.5868 3.195 3.1473 3.195 4.5773Zm-76.667 0c0 .949.742 1.591 1.353 1.982.68.436 1.606.823 2.668 1.171 2.138.701 5.058 1.321 8.262 1.836 6.414 1.031 14.134 1.67 19.384 1.67 5.249 0 13.214-.638 19.873-1.669 3.326-.515 6.368-1.134 8.596-1.833 1.107-.348 2.069-.732 2.774-1.164.353-.215.686-.47.94-.775.258-.31.473-.722.473-1.218 0-.497-.215-.908-.473-1.219-.254-.305-.587-.559-.94-.7747-.705-.4317-1.667-.816-2.774-1.1634-2.228-.6995-5.27-1.3183-8.596-1.8331-6.659-1.0307-14.624-1.6694-19.873-1.6694-5.25 0-12.97.6389-19.384 1.6703-3.204.5151-6.124 1.1347-8.262 1.8361-1.062.3483-1.988.7348-2.668 1.1705-.611.3907-1.353 1.0327-1.353 1.9827Z"
            />
            <path
              fill="#D9D9D9"
              stroke="#B1B1B1"
              stroke-width="2"
              d="M204 107.148c0 1.43-.966 2.991-3.195 4.577-2.203 1.569-5.456 3.023-9.566 4.26C183.031 118.457 171.633 120 159 120c-12.633 0-24.031-1.543-32.239-4.015-4.11-1.237-7.363-2.691-9.566-4.26-2.229-1.586-3.195-3.147-3.195-4.577 0-1.429.966-2.99 3.195-4.577 2.203-1.569 5.456-3.0224 9.566-4.2601 8.208-2.4714 19.606-4.0146 32.239-4.0146 12.633 0 24.031 1.5432 32.239 4.0146 4.11 1.2377 7.363 2.6911 9.566 4.2601 2.229 1.587 3.195 3.148 3.195 4.577Zm-76.667 0c0 .95.742 1.592 1.353 1.983.68.435 1.606.822 2.668 1.17 2.138.702 5.058 1.321 8.262 1.836 6.414 1.032 14.134 1.671 19.384 1.671 5.249 0 13.214-.639 19.873-1.67 3.326-.515 6.368-1.133 8.596-1.833 1.107-.347 2.069-.732 2.774-1.163.353-.216.686-.47.94-.775.258-.311.473-.722.473-1.219 0-.496-.215-.908-.473-1.218-.254-.305-.587-.56-.94-.775-.705-.432-1.667-.816-2.774-1.164-2.228-.699-5.27-1.318-8.596-1.833-6.659-1.031-14.624-1.669-19.873-1.669-5.25 0-12.97.639-19.384 1.67-3.204.515-6.124 1.135-8.262 1.836-1.062.348-1.988.735-2.668 1.171-.611.391-1.353 1.033-1.353 1.982Z"
            />
          </g>
          <path
            fill="#D5D5D5"
            stroke="#B1B1B1"
            d="M102.5 120c9.665 0 17.5-7.835 17.5-17.5S112.165 85 102.5 85 85 92.835 85 102.5s7.835 17.5 17.5 17.5Z"
          />
          <g filter="url(#filter0_f_11_2)">
            <path
              fill="#fff"
              d="M89.6104 100.275c-.6625-.7688-.7611-1.8818-.2117-2.7355 2.9092-4.5203 5.3825-6.6501 9.7612-8.4539.9041-.3724 1.9381-.0955 2.5761.6454 1.004 1.1663.636 2.9673-.745 3.6458l-3.1933 1.5678c-.7429.3648-1.3858.9048-1.8734 1.5735l-2.6313 3.6079c-.8929 1.225-2.6936 1.298-3.6826.149Z"
            />
          </g>
          <defs>
            <filter
              id="filter0_f_11_2"
              width="15.2636"
              height="14.1718"
              x="88.0427"
              y="87.9208"
              color-interpolation-filters="sRGB"
              filterUnits="userSpaceOnUse"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feBlend
                in="SourceGraphic"
                in2="BackgroundImageFix"
                result="shape"
              />
              <feGaussianBlur
                result="effect1_foregroundBlur_11_2"
                stdDeviation=".5"
              />
            </filter>
          </defs>
        </svg>
      </div>
      <div class="welcome">Loves and Questions are welcome!</div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, onBeforeUnmount } from "vue";
import gsap from "gsap";
import { Draggable } from "gsap/Draggable";
gsap.registerPlugin(Draggable);

const clicked = ref(false);
const alertRef = ref();
const handRef = ref();
const springRef = ref();
const rotateRef = ref();
const filterRef = ref();
const velocityRef = ref();
const celestialBodyRef = ref();
const moonRef = ref();
const armRef = ref();
const leg1Ref = ref();
const leg2Ref = ref();
const spinRef = ref();
const mountainRef = ref();
const cloudRef = ref();
const treeRef = ref();
const starArray = ref([]);
const starRef = (el) => starArray.value.push(el);

let draggableTrigger;
let dragAnimation;
let newRotation;
let rotationValue = 0;

const alertAni = gsap.timeline();
const velocityAni = gsap.timeline({ paused: true });
const celestialBodyAni = gsap.timeline({ paused: true });
const walkingAni = gsap.timeline({ paused: true });
const movingAni = gsap.timeline({ paused: true });
const starAni = gsap.timeline({ paused: true });

function animate() {
  handRef.value.style.transform = `rotate(${rotationValue}deg)`;
  rotateRef.value.style.transform = `rotate(${rotationValue * 7.5}deg)`;
  if (rotationValue > 20) {
    rotationValue *= 0.9995;
  } else if (rotationValue > 0.01) {
    rotationValue -= 0.01;
  } else if (rotationValue <= 0) {
    rotationValue = 0.01;
  }
  if (rotationValue > 180) {
    velocityAni.resume();
  } else if (rotationValue <= 180 && rotationValue >= 130) {
    gsap.to(velocityRef.value, {
      opacity: 0,
      duration: 1,
      onComplete: () => {
        velocityAni.restart();
        velocityAni.pause();
      },
    });
  }

  // timeScale이 0이면 오류 발생
  celestialBodyAni.timeScale(rotationValue * 0.001);
  walkingAni.timeScale(rotationValue * 0.005);
  movingAni.timeScale(rotationValue * 0.005);
  starAni.timeScale(rotationValue * 0.001);
  dragAnimation = requestAnimationFrame(animate);
}

onMounted(() => {
  animate();
  draggableTrigger = Draggable.create(springRef.value, {
    type: "rotation",
    onDrag: function () {
      clicked.value = true;
      if (this.rotation >= newRotation && rotationValue <= 240) {
        rotationValue += 0.4;
      } else if (rotationValue != 0) {
        rotationValue -= 0.4;
      }
      newRotation = this.rotation;
    },
  });

  // alert
  alertAni.to(alertRef.value, {
    opacity: 0,
    scale: 1.5,
    repeat: -1,
    duration: 2,
    ease: "none",
  });

  // velocity
  gsap.set(velocityRef.value, {
    top: "random(3, 100)%",
    left: "random(60, 160)%",
  });
  velocityAni.to(velocityRef.value, {
    left: "-90px",
    scaleX: 5,
    opacity: 1,
    duration: 1,
    ease: "none",
    stagger: 0.3,
    repeat: -1,
  });

  // star
  gsap.to(starArray.value, {
    scale: 0,
    transformOrigin: "50% 50%",
    duration: 1,
    yoyo: true,
    repeat: -1,
    ease: "none",
  });
  // sun, moon
  celestialBodyAni.to(filterRef.value, {
    opacity: 0,
    yoyo: true,
    repeat: -1,
    duration: 2.5,
    ease: "none",
  });
  celestialBodyAni.to(
    celestialBodyRef.value,
    {
      rotate: "-=360",
      duration: 5,
      repeat: -1,
      ease: "none",
    },
    "<"
  );
  celestialBodyAni.to(
    moonRef.value,
    {
      rotate: "+=360",
      duration: 5,
      repeat: -1,
      ease: "none",
    },
    "<"
  );

  walkingAni.to(leg1Ref.value, {
    rotate: 60,
    repeat: -1,
    yoyo: true,
    ease: "none",
  });
  walkingAni.to(
    leg2Ref.value,
    {
      rotate: -60,
      transformOrigin: "100% 0",
      repeat: -1,
      yoyo: true,
      ease: "none",
    },
    "<"
  );
  walkingAni.to(
    armRef.value,
    {
      rotate: -60,
      transformOrigin: "100% 0",
      repeat: -1,
      yoyo: true,
      ease: "none",
    },
    "<"
  );
  walkingAni.to(
    spinRef.value,
    {
      scaleY: -1,
      transformOrigin: "50% 50%",
      duration: 3,
      repeat: -1,
      ease: "none",
    },
    "<"
  );

  movingAni.to(treeRef.value, {
    left: "-=200%",
    duration: 10,
    repeat: -1,
    ease: "none",
  });
  movingAni.to(
    mountainRef.value,
    {
      left: "-90px",
      duration: 40,
      repeat: -1,
      ease: "none",
    },
    "<"
  );
  movingAni.to(
    cloudRef.value,
    {
      left: "-90px",
      duration: 30,
      repeat: -1,
      ease: "none",
    },
    "<"
  );

  starAni.to(starArray.value, {
    opacity: 0,
    yoyo: true,
    repeat: -1,
    duration: 2.5,
  });
  for (let i = 0; i < 8; i++) {
    gsap.set(starArray.value[i], {
      top: "random(0, 30)%",
      left: "random(0, 100)%",
    });
  }

  celestialBodyAni.play();
  walkingAni.play();
  movingAni.play();
  starAni.play();
});

onBeforeUnmount(() => {
  draggableTrigger.forEach((trigger) => trigger.kill());
  cancelAnimationFrame(dragAnimation);
});
</script>

<style lang="scss" scoped>
.container {
  width: 100%;
  height: calc(var(--vh) * 100);
  background: #94c93a;
  overflow: hidden;
  .filter {
    position: absolute;
    width: 100%;
    height: calc(var(--vh) * 60);
    background: rgba(0, 0, 0, 0.6);
    opacity: 1;
    pointer-events: none;
    z-index: 1;
  }
  .screen {
    position: relative;
    height: calc(var(--vh) * 60);
    overflow: hidden;
    .velocity {
      position: absolute;
      width: 30px;
      height: 2px;
      background: rgba(255, 255, 255, 0.9);
      opacity: 0;
      transform-origin: 100%;
      z-index: 2;
    }
    .overflow {
      position: absolute;
      width: 100%;
      height: 40%;
      background: #2f80dd;
      overflow: hidden;
      .celestialBody {
        position: absolute;
        top: 50%;
        transform: rotate(90deg);
        width: 100%;
        height: 100%;
        .sun {
          position: absolute;
          bottom: 0;
          left: 75%;
          transform: translate3d(-75%, -50%, 0);
          width: 10vh;
          height: 10vh;
          background: #ecd929;
          border-radius: 50%;
        }
        .moon {
          position: absolute;
          bottom: 0;
          left: 25%;
          transform: translate3d(-25%, -50%, 0) rotate(180deg);
          width: 10vh;
          height: 10vh;
          box-shadow: inset 1.5em -1.5em #e7c738;
          border-radius: 50%;
        }
      }
    }
    .star {
      position: absolute;
      width: 15px;
      height: 15px;
      z-index: 1;
      &::before,
      &::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 60%;
        height: 60%;
        background-color: #fff89b;
        transform: rotate(45deg);
      }

      &::after {
        transform: rotate(90deg);
      }
    }

    .cloud {
      position: absolute;
      top: 5%;
      left: 100%;
      width: 15vh;
      height: 10vh;
      background: #fff;
      border-radius: 10em;
    }
    .mountain {
      position: absolute;
      top: 8%;
      left: 100%;
      border-bottom: 20vh solid rgb(175, 229, 168);
      border-right: 20vh solid transparent;
      border-left: 20vh solid transparent;
    }
    .tree {
      position: absolute;
      height: 50%;
      &:nth-of-type(1) {
        top: 20%;
        left: 110%;
      }
      &:nth-of-type(2) {
        top: 18%;
        left: 160%;
      }
      &:nth-of-type(3) {
        top: 20%;
        left: 180%;
      }
    }
    .toy {
      position: absolute;
      top: 50%;
      left: 5%;
      transform: translate(-5%, -50%);
      height: 70%;
    }
  }
  .footer {
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    width: 100%;
    height: calc(var(--vh) * 40);
    background: rgb(71, 56, 56);
    .speedWrapper {
      height: 100%;
      @media (width <= 768px) {
        & {
          width: 100%;
        }
      }
      .speed {
        height: 100%;
        @media (width <= 768px) {
          & {
            width: 100%;
          }
        }
      }
    }
    .spring {
      position: relative;
      height: 100%;
      background: #cc3333;
      @media (width <= 768px) {
        & {
          width: 100%;
          height: auto;
        }
      }
      p {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 5em;
        font-weight: 700;
        color: white;
        -webkit-text-stroke: 1px black;
        pointer-events: none;
        z-index: 1;
        @media (width <= 768px) {
          & {
            font-size: 3em;
          }
        }
      }
      .drag {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
      }
      .rotate {
        position: relative;
        height: 100%;
        pointer-events: none;
        .spin {
          transform-origin: 50% 50%;
        }
      }
    }
    .welcome {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
      text-align: center;
      font-size: 1.5em;
      font-weight: 600;
      color: white;
      @media (width <= 768px) {
        & {
          display: none;
        }
      }
    }
  }
}
.hand {
  transform-origin: center center;
}
</style>
