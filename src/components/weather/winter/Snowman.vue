<template>
  <svg
    class="snowman"
    width="1920"
    height="1080"
    preserveAspectRatio="none"
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 1012 525"
  >
    <defs />
    <g id="snow">
      <path id="groundsnow" fill="#fff" d="M0 427h1012v98H0z" />
      <g id="snowman">
        <g id="body" filter="url(#filter0_body)">
          <circle cx="846.9" cy="422.9" r="53.1" fill="#fff" />
        </g>
        <g id="buttons" fill="#161616">
          <circle id="Ellipse 3" cx="846" cy="399.3" r="2.6" />
          <circle id="Ellipse 4" cx="846" cy="416.2" r="2.6" />
          <circle id="Ellipse 5" cx="846" cy="433" r="2.6" />
        </g>
        <path
          id="lefthand"
          fill="url(#paint0_lefthand)"
          d="M812.2 421.9a4 4 0 004-6.9l-4 6.9zm-49.2-29l49.2 29 4-6.9-49.2-29-4 7z"
        />
        <path
          id="righthand"
          fill="url(#paint1_righthand)"
          d="M875.6 415a4 4 0 004.7 6.4l-4.7-6.4zm45.8-34l-45.8 34 4.7 6.4 46-34-4.9-6.4z"
        />
        <g id="head" filter="url(#filter1_head)">
          <circle cx="847.2" cy="348.6" r="34.6" fill="#fff" />
        </g>
        <g id="face">
          <g id="eyes">
            <circle id="lefteye" cx="834.2" cy="339" r="3.8" fill="#3E3E3E" />
            <circle id="righteye" cx="861.1" cy="339" r="3.8" fill="#3E3E3E" />
            <path
              id="lefteyebrow"
              stroke="#000"
              stroke-width="2"
              d="M830.7 328.5l7 1.8"
            />
            <path
              id="righteyebrow"
              stroke="#000"
              stroke-width="2"
              d="M857.6 330.3l7-1.8"
            />
          </g>
          <path
            id="mouse"
            stroke="#000"
            stroke-linecap="round"
            stroke-width="3"
            d="M835.2 366.9c8.8 6.8 13.8 7.3 22.6 0"
          />
          <g id="nose" filter="url(#filter2_nose)">
            <path
              id="Polygon 3"
              fill="#FF842C"
              d="M832.8 353c0-1.2 13.2-4.4 13.2-4.4.6 3.4.7 5.2.1 8.4 0 0-13.3-2.8-13.3-4z"
            />
            <path
              id="Line 4"
              stroke="#E06003"
              stroke-width=".2"
              d="M845 356.7c.3-3 .3-4.7 0-7.8"
            />
            <path
              id="Line 5"
              stroke="#E06003"
              stroke-width=".2"
              d="M843 356.3c.4-2.7.3-4.2 0-6.9"
            />
            <path
              id="Line 6"
              stroke="#E06003"
              stroke-width=".2"
              d="M841.2 355.8c.2-2.3.2-3.6-.1-5.9"
            />
            <path
              id="Line 7"
              stroke="#E06003"
              stroke-width=".2"
              d="M839.2 355.4c.3-2 .3-3 0-5"
            />
            <path
              id="Line 8"
              stroke="#E06003"
              stroke-width=".2"
              d="M837.3 354.9c.3-1.6.3-2.4 0-3.9"
            />
            <path
              id="Line 9"
              stroke="#E06003"
              stroke-width=".2"
              d="M835.4 354.3a4 4 0 000-2.7"
            />
            <path
              id="Line 10"
              stroke="#E06003"
              stroke-width=".2"
              d="M833.5 353.5v-1"
            />
          </g>
        </g>
        <g id="hat">
          <path
            id="Polygon 1"
            fill="#D30000"
            d="M851 281.7c12.4 1.4 14 36.8 14 36.8a59 59 0 01-36 .6s9.6-38.8 22-37.4z"
          />
          <g id="Rectangle 1" filter="url(#filter3_hat1)">
            <path
              fill="#F4F4F4"
              d="M830.3 314a53 53 0 0034.4-.4l.8 5.5a68.6 68.6 0 01-36.8.1l1.6-5.3z"
            />
          </g>
          <g id="Polygon 2" filter="url(#filter4_hat2)">
            <path
              fill="#D30000"
              d="M873.3 307.5c-2 1-34.7-14.5-34.7-14.5l1.5-3 1.6-2.2 1.3-1.9 1.3-1.4s.3-.5 1.6-1.3l1.6-.9c.3 0 1.7-.8 2.7-.8 1 0 1.9.2 1.9.2l1.3.6 1.1.6s20.8 23.5 18.8 24.6z"
            />
          </g>
          <g id="Vector" filter="url(#filter5_hat3)">
            <path
              fill="#F4F4F4"
              d="M875.4 307.7c.2 1.4-1 2.6-2.5 3-1.6-.3-2.5-1.5-2.8-2.9a3.3 3.3 0 012.8-3c1.3.3 2.2 1.2 2.5 3z"
            />
          </g>
        </g>
        <g id="scarf" filter="url(#filter6_hat4)">
          <path
            fill="url(#paint2_scarf)"
            fill-rule="evenodd"
            d="M818.8 369.8a99 99 0 0058 1s8.3 2.5 9.3 8.1 5.8 10.8 5.8 10.8c-20.7 2.6-39 3.5-58.2 2.6V415h-1.4v-6.3h-.5v6.3h-1.4v-6.3h-.5v6.3h-2v-6.3h-.4v6.3H826v-6.3h-.4v6.3h-2v-6.3h-.4v6.3h-2v-23.5a390 390 0 01-18.7-2s5.5-5.3 5.7-10.5c.1-5.2 10.6-9.2 10.6-9.2z"
            clip-rule="evenodd"
          />
        </g>
      </g>
    </g>
    <defs>
      <filter
        id="filter0_body"
        width="114.2"
        height="114.2"
        x="789.8"
        y="369.8"
        color-interpolation-filters="sRGB"
        filterUnits="userSpaceOnUse"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dy="4" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" operator="out" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
        <feBlend in2="BackgroundImageFix" result="effect1_dropShadoww" />
        <feBlend in="SourceGraphic" in2="effect1_dropShadoww" result="shape" />
      </filter>
      <filter
        id="filter1_head"
        width="77.2"
        height="77.2"
        x="808.6"
        y="314"
        color-interpolation-filters="sRGB"
        filterUnits="userSpaceOnUse"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dy="4" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" operator="out" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
        <feBlend in2="BackgroundImageFix" result="effect1_dropShadoww" />
        <feBlend in="SourceGraphic" in2="effect1_dropShadoww" result="shape" />
      </filter>
      <filter
        id="filter2_nose"
        width="21.8"
        height="16.5"
        x="830.8"
        y="347.6"
        color-interpolation-filters="sRGB"
        filterUnits="userSpaceOnUse"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dx="2" dy="3" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" operator="out" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
        <feBlend in2="BackgroundImageFix" result="effect1_dropShadoww" />
        <feBlend in="SourceGraphic" in2="effect1_dropShadoww" result="shape" />
      </filter>
      <filter
        id="filter3_hat1"
        width="44.9"
        height="16.6"
        x="824.6"
        y="313.4"
        color-interpolation-filters="sRGB"
        filterUnits="userSpaceOnUse"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dy="4" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" operator="out" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
        <feBlend in2="BackgroundImageFix" result="effect1_dropShadoww" />
        <feBlend in="SourceGraphic" in2="effect1_dropShadoww" result="shape" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dx="2" dy="2" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
        <feBlend in2="shape" result="effect2_innerShadow" />
      </filter>
      <filter
        id="filter4_hat2"
        width="50.2"
        height="44.7"
        x="834"
        y="277.4"
        color-interpolation-filters="sRGB"
        filterUnits="userSpaceOnUse"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dx="2" dy="3" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" operator="out" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
        <feBlend in2="BackgroundImageFix" result="effect1_dropShadoww" />
        <feBlend in="SourceGraphic" in2="effect1_dropShadoww" result="shape" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dx="-4" dy="4" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
        <feBlend in2="shape" result="effect2_innerShadow" />
      </filter>
      <filter
        id="filter5_hat3"
        width="7.4"
        height="7.8"
        x="870.1"
        y="304.8"
        color-interpolation-filters="sRGB"
        filterUnits="userSpaceOnUse"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dx="2" dy="2" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
        <feBlend in2="shape" result="effect1_innerShadow" />
      </filter>
      <filter
        id="filter6_hat4"
        width="97.4"
        height="53.2"
        x="798.5"
        y="369.8"
        color-interpolation-filters="sRGB"
        filterUnits="userSpaceOnUse"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feColorMatrix
          in="SourceAlpha"
          result="hardAlpha"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dy="4" />
        <feGaussianBlur stdDeviation="2" />
        <feComposite in2="hardAlpha" operator="out" />
        <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0" />
        <feBlend in2="BackgroundImageFix" result="effect1_dropShadoww" />
        <feBlend in="SourceGraphic" in2="effect1_dropShadoww" result="shape" />
      </filter>
      <linearGradient
        id="paint0_lefthand"
        x1="812.4"
        x2="818.4"
        y1="409.5"
        y2="414.8"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#75310A" />
        <stop offset="1" stop-color="#fff" />
      </linearGradient>
      <linearGradient
        id="paint1_righthand"
        x1="886.9"
        x2="879.7"
        y1="420.1"
        y2="423.5"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#75310A" />
        <stop offset="1" stop-color="#fff" />
      </linearGradient>
      <linearGradient
        id="paint2_scarf"
        x1="847.4"
        x2="847.4"
        y1="377.6"
        y2="387.7"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#EBEF37" />
        <stop offset="1" stop-color="#D1D51B" />
      </linearGradient>
    </defs>
  </svg>
</template>

<script setup>
import { onMounted, onBeforeUnmount } from "vue";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
gsap.registerPlugin(ScrollTrigger);

let scrollTrigger1,
  scrollTrigger2,
  scrollTrigger3,
  scrollTrigger4,
  scrollTrigger5,
  scrollTrigger6,
  scrollTrigger7;

onMounted(() => {
  const Ground = gsap.timeline();
  scrollTrigger1 = ScrollTrigger.create({
    animation: Ground,
    trigger: ".scrollElement",
    start: "76% top",
    end: "79% 100%",
    scrub: 3,
  });
  Ground.from("#groundsnow", { opacity: 0, yPercent: 50, ease: "none" }, 0);

  const Body = gsap.timeline();
  scrollTrigger2 = ScrollTrigger.create({
    animation: Body,
    trigger: ".scrollElement",
    start: "81% top",
    end: "92% 100%",
    scrub: 2,
  });
  Body.from(
    "#body",
    {
      transformOrigin: "bottom",
      scale: 0.2,
      xPercent: -900,
      duration: 5000,
      ease: "power4",
    },
    0
  );

  const Head = gsap.timeline();
  scrollTrigger3 = ScrollTrigger.create({
    animation: Head,
    trigger: ".scrollElement",
    start: "89% top",
    end: "91% 100%",
    scrub: 2,
  });
  Head.from(
    "#head",
    { opacity: 0, yPercent: 100, duration: 5000, ease: "power4" },
    0
  );

  const Handbutton = gsap.timeline();
  scrollTrigger4 = ScrollTrigger.create({
    animation: Handbutton,
    trigger: ".scrollElement",
    start: "93% top",
    end: "95% 100%",
    scrub: 3,
  });
  Handbutton.from(
    "#lefthand, #righthand, #buttons",
    { opacity: 0, duration: 3 },
    0
  );

  const Face = gsap.timeline();
  scrollTrigger5 = ScrollTrigger.create({
    animation: Face,
    trigger: ".scrollElement",
    start: "92% top",
    end: "95% 100%",
    scrub: 2,
  });
  Face.from("#face", { opacity: 0, duration: 3 }, 0);

  const Scarf = gsap.timeline();
  scrollTrigger6 = ScrollTrigger.create({
    animation: Scarf,
    trigger: ".scrollElement",
    start: "91% top",
    end: "94% 100%",
    scrub: 3,
  });
  Scarf.from(
    "#scarf",
    { opacity: 0, yPercent: -100, duration: 3, delay: 5 },
    0
  );

  const Hat = gsap.timeline();
  scrollTrigger7 = ScrollTrigger.create({
    animation: Hat,
    trigger: ".scrollElement",
    start: "92% top",
    end: "95% 100%",
    scrub: 3,
  });
  Hat.from("#hat", { opacity: 0, yPercent: -100, duration: 3, delay: 5 }, 0);
});

onBeforeUnmount(() => {
  scrollTrigger1.kill();
  scrollTrigger2.kill();
  scrollTrigger3.kill();
  scrollTrigger4.kill();
  scrollTrigger5.kill();
  scrollTrigger6.kill();
  scrollTrigger7.kill();
});
</script>

<style scoped></style>
