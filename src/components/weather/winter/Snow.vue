<template>
  <svg
    class="snow"
    preserveAspectRatio="none"
    width="1920"
    height="1080"
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 1012 525"
  >
    <defs />
    <g fill="#fff" clip-path="url(#clip0)">
      <g id="snow1">
        <circle id="Ellipse 27" cx="66" cy="37.5" r="6.7" />
        <circle id="Ellipse 31" cx="717.2" cy="60.7" r="6.7" />
        <circle id="Ellipse 39" cx="605.1" cy="35.6" r="6.7" />
        <circle id="Ellipse 44" cx="515.5" cy="113.1" r="6.7" />
        <circle id="Ellipse 53" cx="934.8" cy="282.2" r="6.7" />
        <circle id="Ellipse 72" cx="80.9" cy="437.7" r="6.7" />
        <circle id="Ellipse 29" cx="117.7" cy="92.7" r="6.7" />
        <circle id="Ellipse 54" cx="52.8" cy="243" r="6.7" />
        <circle id="Ellipse 73" cx="110.7" cy="511.5" r="6.7" />
        <circle id="Ellipse 74" cx="486.2" cy="388.6" r="6.7" />
        <circle id="Ellipse 56" cx="660.3" cy="402.5" r="6.7" />
        <circle id="Ellipse 87" cx="252.3" cy="484.8" r="6.7" />
        <circle id="Ellipse 57" cx="549.8" cy="249.6" r="6.7" />
        <circle id="Ellipse 75" cx="598.1" cy="464.7" r="6.7" />
        <circle id="Ellipse 46" cx="209.2" cy="164.8" r="6.7" />
        <circle id="Ellipse 58" cx="710.5" cy="288.7" r="6.7" />
        <circle id="Ellipse 76" cx="344.1" cy="275.5" r="6.7" />
        <circle id="Ellipse 59" cx="163" cy="339.9" r="6.7" />
        <circle id="Ellipse 28" cx="350.9" cy="37.3" r="6.7" />
        <circle id="Ellipse 77" cx="330.6" cy="402.3" r="6.7" />
        <circle id="Ellipse 62" cx="831.3" cy="353.3" r="6.7" />
        <circle id="Ellipse 30" cx="751" cy="164.7" r="6.7" />
        <circle id="Ellipse 65" cx="407.3" cy="180.6" r="6.7" />
        <circle id="Ellipse 34" cx="913.3" cy="151.2" r="6.7" />
        <circle id="Ellipse 82" cx="884" cy="451.3" r="6.7" />
        <circle id="Ellipse 83" cx="684.6" cy="511.5" r="6.7" />
        <circle id="Ellipse 42" cx="906.6" cy="21.9" r="6.7" />
        <circle id="Ellipse 85" cx="941.7" cy="498" r="6.7" />
        <circle id="Ellipse 86" cx="435" cy="511.5" r="6.7" />
      </g>
      <g id="snow2" fill-opacity=".9">
        <circle id="Ellipse 71" cx="175.9" cy="48.2" r="8.2" />
        <circle id="Ellipse 85_2" cx="40.2" cy="76.2" r="8.2" />
        <circle id="Ellipse 113" cx="159.5" cy="319" r="8.2" />
        <circle id="Ellipse 155" cx="56.5" cy="472.7" r="8.2" />
        <circle id="Ellipse 100" cx="110.7" cy="193.7" r="8.2" />
        <circle id="Ellipse 142" cx="250.1" cy="513.3" r="8.2" />
        <circle id="Ellipse 73_2" cx="368.2" cy="19.2" r="8.2" />
        <circle id="Ellipse 129" cx="407.7" cy="331.3" r="8.2" />
        <circle id="Ellipse 159" cx="407.7" cy="501.3" r="8.2" />
        <circle id="Ellipse 104" cx="492.7" cy="151.4" r="8.2" />
        <circle id="Ellipse 91" cx="628.6" cy="100.2" r="8.2" />
        <circle id="Ellipse 92" cx="791.2" cy="112.1" r="8.2" />
        <circle id="Ellipse 106" cx="853.8" cy="213.6" r="8.2" />
        <circle id="Ellipse 169" cx="970.2" cy="179.2" r="8.2" />
        <circle id="Ellipse 135" cx="741.8" cy="331.4" r="8.2" />
        <circle id="Ellipse 163" cx="845.7" cy="516.9" r="8.2" />
        <circle id="Ellipse 77_2" cx="701.1" cy="7.2" r="8.2" />
        <circle id="Ellipse 137" cx="574.7" cy="302.6" r="8.2" />
        <circle id="Ellipse 151" cx="661.5" cy="464.2" r="8.2" />
        <circle id="Ellipse 96" cx="953.8" cy="88.2" r="8.2" />
        <circle id="Ellipse 139" cx="953.8" cy="368.4" r="8.2" />
        <circle id="Ellipse 167" cx="937.2" cy="501.5" r="8.2" />
        <circle id="Ellipse 83_2" cx="845.6" cy="40.2" r="8.2" />
        <circle id="Ellipse 154" cx="816.9" cy="275.7" r="8.2" />
        <circle id="Ellipse 168" cx="970.2" cy="234.2" r="8.2" />
      </g>
      <g id="snow3" fill-opacity=".8">
        <circle id="Ellipse 169_2" cx="172.6" cy="50.9" r="11.2" />
        <circle id="Ellipse 180" cx="41.7" cy="117.2" r="11.2" />
        <circle id="Ellipse 191" cx="286.2" cy="202.8" r="11.2" />
        <circle id="Ellipse 213" cx="30.2" cy="434" r="11.2" />
        <circle id="Ellipse 170" cx="600.6" cy="180.3" r="11.2" />
        <circle id="Ellipse 203" cx="544.9" cy="456.3" r="11.2" />
        <circle id="Ellipse 214" cx="172.1" cy="512.2" r="11.2" />
        <circle id="Ellipse 193" cx="770.6" cy="278.7" r="11.2" />
        <circle id="Ellipse 217" cx="395.9" cy="386.2" r="11.2" />
        <circle id="Ellipse 174" cx="677.5" cy="71.8" r="11.2" />
        <circle id="Ellipse 175" cx="855.2" cy="94.2" r="11.2" />
        <circle id="Ellipse 224" cx="978.2" cy="203.2" r="11.2" />
        <path
          id="Ellipse 220"
          d="M161.2 267.8a11.2 11.2 0 11-22.4 0 11.2 11.2 0 0122.4 0z"
        />
        <circle id="Ellipse 176" cx="440.5" cy="51" r="11.2" />
        <circle id="Ellipse 189" cx="612" cy="334.9" r="11.2" />
        <circle id="Ellipse 211" cx="462.8" cy="245.4" r="11.2" />
        <circle id="Ellipse 212" cx="923.6" cy="323.3" r="11.2" />
        <circle id="Ellipse 223" cx="720.9" cy="473.7" r="11.2" />
      </g>
    </g>
    <defs>
      <clipPath id="clip0">
        <path fill="#fff" d="M0 0h1012v525H0z" />
      </clipPath>
    </defs>
  </svg>
  <svg
    class="snow"
    preserveAspectRatio="none"
    width="1920"
    height="1080"
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 1012 525"
  >
    <defs />
    <g fill="#fff" clip-path="url(#clip0)">
      <g id="snow21">
        <circle id="Ellipse 27" cx="66" cy="37.5" r="6.7" />
        <circle id="Ellipse 31" cx="717.2" cy="60.7" r="6.7" />
        <circle id="Ellipse 39" cx="605.1" cy="35.6" r="6.7" />
        <circle id="Ellipse 44" cx="515.5" cy="113.1" r="6.7" />
        <circle id="Ellipse 53" cx="934.8" cy="282.2" r="6.7" />
        <circle id="Ellipse 72" cx="80.9" cy="437.7" r="6.7" />
        <circle id="Ellipse 29" cx="117.7" cy="92.7" r="6.7" />
        <circle id="Ellipse 54" cx="52.8" cy="243" r="6.7" />
        <circle id="Ellipse 73" cx="110.7" cy="511.5" r="6.7" />
        <circle id="Ellipse 74" cx="486.2" cy="388.6" r="6.7" />
        <circle id="Ellipse 56" cx="660.3" cy="402.5" r="6.7" />
        <circle id="Ellipse 87" cx="252.3" cy="484.8" r="6.7" />
        <circle id="Ellipse 57" cx="549.8" cy="249.6" r="6.7" />
        <circle id="Ellipse 75" cx="598.1" cy="464.7" r="6.7" />
        <circle id="Ellipse 46" cx="209.2" cy="164.8" r="6.7" />
        <circle id="Ellipse 58" cx="710.5" cy="288.7" r="6.7" />
        <circle id="Ellipse 76" cx="344.1" cy="275.5" r="6.7" />
        <circle id="Ellipse 59" cx="163" cy="339.9" r="6.7" />
        <circle id="Ellipse 28" cx="350.9" cy="37.3" r="6.7" />
        <circle id="Ellipse 77" cx="330.6" cy="402.3" r="6.7" />
        <circle id="Ellipse 62" cx="831.3" cy="353.3" r="6.7" />
        <circle id="Ellipse 30" cx="751" cy="164.7" r="6.7" />
        <circle id="Ellipse 65" cx="407.3" cy="180.6" r="6.7" />
        <circle id="Ellipse 34" cx="913.3" cy="151.2" r="6.7" />
        <circle id="Ellipse 82" cx="884" cy="451.3" r="6.7" />
        <circle id="Ellipse 83" cx="684.6" cy="511.5" r="6.7" />
        <circle id="Ellipse 42" cx="906.6" cy="21.9" r="6.7" />
        <circle id="Ellipse 85" cx="941.7" cy="498" r="6.7" />
        <circle id="Ellipse 86" cx="435" cy="511.5" r="6.7" />
      </g>
      <g id="snow22" fill-opacity=".9">
        <circle id="Ellipse 71" cx="175.9" cy="48.2" r="8.2" />
        <circle id="Ellipse 85_2" cx="40.2" cy="76.2" r="8.2" />
        <circle id="Ellipse 113" cx="159.5" cy="319" r="8.2" />
        <circle id="Ellipse 155" cx="56.5" cy="472.7" r="8.2" />
        <circle id="Ellipse 100" cx="110.7" cy="193.7" r="8.2" />
        <circle id="Ellipse 142" cx="250.1" cy="513.3" r="8.2" />
        <circle id="Ellipse 73_2" cx="368.2" cy="19.2" r="8.2" />
        <circle id="Ellipse 129" cx="407.7" cy="331.3" r="8.2" />
        <circle id="Ellipse 159" cx="407.7" cy="501.3" r="8.2" />
        <circle id="Ellipse 104" cx="492.7" cy="151.4" r="8.2" />
        <circle id="Ellipse 91" cx="628.6" cy="100.2" r="8.2" />
        <circle id="Ellipse 92" cx="791.2" cy="112.1" r="8.2" />
        <circle id="Ellipse 106" cx="853.8" cy="213.6" r="8.2" />
        <circle id="Ellipse 169" cx="970.2" cy="179.2" r="8.2" />
        <circle id="Ellipse 135" cx="741.8" cy="331.4" r="8.2" />
        <circle id="Ellipse 163" cx="845.7" cy="516.9" r="8.2" />
        <circle id="Ellipse 77_2" cx="701.1" cy="7.2" r="8.2" />
        <circle id="Ellipse 137" cx="574.7" cy="302.6" r="8.2" />
        <circle id="Ellipse 151" cx="661.5" cy="464.2" r="8.2" />
        <circle id="Ellipse 96" cx="953.8" cy="88.2" r="8.2" />
        <circle id="Ellipse 139" cx="953.8" cy="368.4" r="8.2" />
        <circle id="Ellipse 167" cx="937.2" cy="501.5" r="8.2" />
        <circle id="Ellipse 83_2" cx="845.6" cy="40.2" r="8.2" />
        <circle id="Ellipse 154" cx="816.9" cy="275.7" r="8.2" />
        <circle id="Ellipse 168" cx="970.2" cy="234.2" r="8.2" />
      </g>
      <g id="snow23" fill-opacity=".8">
        <circle id="Ellipse 169_2" cx="172.6" cy="50.9" r="11.2" />
        <circle id="Ellipse 180" cx="41.7" cy="117.2" r="11.2" />
        <circle id="Ellipse 191" cx="286.2" cy="202.8" r="11.2" />
        <circle id="Ellipse 213" cx="30.2" cy="434" r="11.2" />
        <circle id="Ellipse 170" cx="600.6" cy="180.3" r="11.2" />
        <circle id="Ellipse 203" cx="544.9" cy="456.3" r="11.2" />
        <circle id="Ellipse 214" cx="172.1" cy="512.2" r="11.2" />
        <circle id="Ellipse 193" cx="770.6" cy="278.7" r="11.2" />
        <circle id="Ellipse 217" cx="395.9" cy="386.2" r="11.2" />
        <circle id="Ellipse 174" cx="677.5" cy="71.8" r="11.2" />
        <circle id="Ellipse 175" cx="855.2" cy="94.2" r="11.2" />
        <circle id="Ellipse 224" cx="978.2" cy="203.2" r="11.2" />
        <path
          id="Ellipse 220"
          d="M161.2 267.8a11.2 11.2 0 11-22.4 0 11.2 11.2 0 0122.4 0z"
        />
        <circle id="Ellipse 176" cx="440.5" cy="51" r="11.2" />
        <circle id="Ellipse 189" cx="612" cy="334.9" r="11.2" />
        <circle id="Ellipse 211" cx="462.8" cy="245.4" r="11.2" />
        <circle id="Ellipse 212" cx="923.6" cy="323.3" r="11.2" />
        <circle id="Ellipse 223" cx="720.9" cy="473.7" r="11.2" />
      </g>
    </g>
    <defs>
      <clipPath id="clip0">
        <path fill="#fff" d="M0 0h1012v525H0z" />
      </clipPath>
    </defs>
  </svg>
</template>

<script setup>
import { onMounted, onBeforeUnmount } from "vue";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
gsap.registerPlugin(ScrollTrigger);

let scrollTrigger;

onMounted(() => {
  const Snow = gsap.timeline();
  scrollTrigger = ScrollTrigger.create({
    animation: Snow,
    trigger: ".scrollElement",
    start: "72.5% top",
    end: "100% 100%",
    scrub: 2,
    onEnter: () => {
      gsap.to("#snow1, #snow2, #snow3, #snow21, #snow22, #snow23", {
        display: "block",
      });
      gsap.fromTo(
        "#snow3",
        {
          yPercent: -110,
          repeat: -1,
          ease: "none",
          duration: 10,
          delay: 2,
        },
        { yPercent: 110, repeat: -1, ease: "none", duration: 10, delay: 2 }
      );
      gsap.fromTo(
        "#snow2",
        { yPercent: -110, repeat: -1, ease: "none", duration: 9, delay: 4 },
        { yPercent: 110, repeat: -1, ease: "none", duration: 9, delay: 4 }
      );
      gsap.fromTo(
        "#snow1",
        { yPercent: -110, repeat: -1, ease: "none", duration: 7, delay: 4 },
        { yPercent: 110, repeat: -1, ease: "none", duration: 7, delay: 4 }
      );
      gsap.fromTo(
        "#snow23",
        {
          yPercent: -110,
          repeat: -1,
          ease: "none",
          duration: 10,
          delay: 7,
        },
        { yPercent: 110, repeat: -1, ease: "none", duration: 10, delay: 7 }
      );
      gsap.fromTo(
        "#snow22",
        { yPercent: -110, repeat: -1, ease: "none", duration: 9, delay: 7 },
        { yPercent: 110, repeat: -1, ease: "none", duration: 9, delay: 7 }
      );
      gsap.fromTo(
        "#snow21",
        { yPercent: -110, repeat: -1, ease: "none", duration: 7, delay: 7 },
        { yPercent: 110, repeat: -1, ease: "none", duration: 7, delay: 7 }
      );
    },
    onLeaveBack: () => {
      gsap.to("#snow1, #snow2, #snow3, #snow21, #snow22, #snow23", {
        display: "none",
      });
    },
  });
});

onBeforeUnmount(() => {
  scrollTrigger.kill();
});
</script>

<style scoped>
#snow1,
#snow2,
#snow3,
#snow21,
#snow22,
#snow23 {
  display: none;
}
.snow {
  display: block;
  width: 100%;
  height: 100%;
  position: fixed;
  top: 0;
  left: 0;
}
</style>
